(self.webpackChunkv2x_frontend=self.webpackChunkv2x_frontend||[]).push([[2992],{2992:function(e,t,n){"use strict";n.r(t),n.d(t,{startInputShims:function(){return f}});var o=n(5667),r=n(1444);const i=new WeakMap,a=(e,t,n,o=0,r=!1)=>{i.has(e)!==n&&(n?d(e,t,o,r):l(e,t))},s=e=>e===e.getRootNode().activeElement,d=(e,t,n,o=!1)=>{const r=t.parentNode,a=t.cloneNode(!1);a.classList.add("cloned-input"),a.tabIndex=-1,o&&(a.disabled=!0),r.appendChild(a),i.set(e,a);const s="rtl"===e.ownerDocument.dir?9999:-9999;e.style.pointerEvents="none",t.style.transform=`translate3d(${s}px,${n}px,0) scale(0)`},l=(e,t)=>{const n=i.get(e);n&&(i.delete(e),n.remove()),e.style.pointerEvents="",t.style.transform=""},c="input, textarea, [no-blur], [contenteditable]",u=(e,t)=>{var n,r;if("INPUT"!==e.tagName)return;if(e.parentElement&&"ION-INPUT"===e.parentElement.tagName)return;if("ION-SEARCHBAR"===(null===(r=null===(n=e.parentElement)||void 0===n?void 0:n.parentElement)||void 0===r?void 0:r.tagName))return;const i=(0,o.f)(e);if(null===i)return;const a=i.$ionPaddingTimer;a&&clearTimeout(a),t>0?i.style.setProperty("--keyboard-offset",`${t}px`):i.$ionPaddingTimer=setTimeout(()=>{i.style.setProperty("--keyboard-offset","0px")},120)},f=(e,t)=>{const n=document,i="ios"===t,d="android"===t,l=e.getNumber("keyboardHeight",290),f=e.getBoolean("scrollAssist",!0),m=e.getBoolean("hideCaretOnScroll",i),p=e.getBoolean("inputBlurring",i),v=e.getBoolean("scrollPadding",!0),h=Array.from(n.querySelectorAll("ion-input, ion-textarea")),w=new WeakMap,y=new WeakMap,g=async e=>{await new Promise(t=>(0,r.c)(e,t));const t=e.shadowRoot||e,n=t.querySelector("input")||t.querySelector("textarea"),i=(0,o.f)(e),c=i?null:e.closest("ion-footer");if(n){if(i&&m&&!w.has(e)){const t=((e,t,n)=>{if(!n||!t)return()=>{};const o=n=>{s(t)&&a(e,t,n)},i=()=>a(e,t,!1),d=()=>o(!0),l=()=>o(!1);return(0,r.a)(n,"ionScrollStart",d),(0,r.a)(n,"ionScrollEnd",l),t.addEventListener("blur",i),()=>{(0,r.b)(n,"ionScrollStart",d),(0,r.b)(n,"ionScrollEnd",l),t.removeEventListener("blur",i)}})(e,n,i);w.set(e,t)}if("date"!==n.type&&"datetime-local"!==n.type&&(i||c)&&f&&!y.has(e)){const t=((e,t,n,i,d,l=!1)=>{let c;const u=e=>{c=(0,r.p)(e)},f=u=>{if(!c)return;const f=(0,r.p)(u);((e,t,n)=>{if(t&&n){const e=t.x-n.x,o=t.y-n.y;return e*e+o*o>36}return!1})(0,c,f)||s(t)||(async(e,t,n,i,s,d=!1)=>{if(!n&&!i)return;const l=((e,t,n)=>{var o;return((e,t,n,o)=>{const r=e.top,i=e.bottom,a=t.top,s=a+15,d=.75*Math.min(t.bottom,o-n)-i,l=s-r,c=Math.round(d<0?-d:l>0?-l:0),u=Math.min(c,r-a),f=Math.abs(u);return{scrollAmount:u,scrollDuration:Math.min(400,Math.max(150,f/.3)),scrollPadding:n,inputSafeY:4-(r-s)}})((null!==(o=e.closest("ion-item,[ion-item]"))&&void 0!==o?o:e).getBoundingClientRect(),t.getBoundingClientRect(),n,e.ownerDocument.defaultView.innerHeight)})(e,n||i,s);if(n&&Math.abs(l.scrollAmount)<4)t.focus();else if(a(e,t,!0,l.inputSafeY,d),t.focus(),(0,r.r)(()=>e.click()),"undefined"!=typeof window){let r;const i=async()=>{void 0!==r&&clearTimeout(r),window.removeEventListener("ionKeyboardDidShow",s),window.removeEventListener("ionKeyboardDidShow",i),n&&await(0,o.c)(n,0,l.scrollAmount,l.scrollDuration),a(e,t,!1,l.inputSafeY),t.focus()},s=()=>{window.removeEventListener("ionKeyboardDidShow",s),window.addEventListener("ionKeyboardDidShow",i)};if(n){const e=await(0,o.g)(n);if(l.scrollAmount>e.scrollHeight-e.clientHeight-e.scrollTop)return"password"===t.type?(l.scrollAmount+=50,window.addEventListener("ionKeyboardDidShow",s)):window.addEventListener("ionKeyboardDidShow",i),void(r=setTimeout(i,1e3))}i()}})(e,t,n,i,d,l)};return e.addEventListener("touchstart",u,{capture:!0,passive:!0}),e.addEventListener("touchend",f,!0),()=>{e.removeEventListener("touchstart",u,!0),e.removeEventListener("touchend",f,!0)}})(e,n,i,c,l,d);y.set(e,t)}}};p&&(()=>{let e=!0,t=!1;const n=document;(0,r.a)(n,"ionScrollStart",()=>{t=!0}),n.addEventListener("focusin",()=>{e=!0},!0),n.addEventListener("touchend",o=>{if(t)return void(t=!1);const r=n.activeElement;if(!r)return;if(r.matches(c))return;const i=o.target;i!==r&&(i.matches(c)||i.closest(c)||(e=!1,setTimeout(()=>{e||r.blur()},50)))},!1)})(),v&&(e=>{const t=document;t.addEventListener("focusin",t=>{u(t.target,e)}),t.addEventListener("focusout",e=>{u(e.target,0)})})(l);for(const o of h)g(o);n.addEventListener("ionInputDidLoad",e=>{g(e.detail)}),n.addEventListener("ionInputDidUnload",e=>{(e=>{if(m){const t=w.get(e);t&&t(),w.delete(e)}if(f){const t=y.get(e);t&&t(),y.delete(e)}})(e.detail)})}}}]);